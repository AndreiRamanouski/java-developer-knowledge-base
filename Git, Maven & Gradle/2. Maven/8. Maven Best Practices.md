## Overview

Following Maven best practices ensures reproducible builds, maintainable projects, and efficient development workflows. This guide covers proven patterns used in production environments.

```
┌─────────────────────────────────────────────────────────────────┐
│                  MAVEN BEST PRACTICES                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Dependency Management                                          │
│  ├── Centralize versions                                       │
│  ├── Use BOMs                                                   │
│  ├── Pin versions                                              │
│  └── Avoid version ranges                                      │
│                                                                 │
│  Build Optimization                                             │
│  ├── Parallel builds                                           │
│  ├── Incremental compilation                                   │
│  ├── Offline mode                                              │
│  └── Smart test execution                                      │
│                                                                 │
│  Project Structure                                              │
│  ├── Standard layout                                           │
│  ├── Multi-module organization                                 │
│  ├── Layer separation                                          │
│  └── Clear module boundaries                                   │
│                                                                 │
│  Configuration                                                  │
│  ├── Settings.xml optimization                                 │
│  ├── Security best practices                                   │
│  ├── Repository management                                     │
│  └── Plugin configuration                                      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 1. Dependency Management

### 1.1 Use DependencyManagement in Parent POM

**✓ GOOD: Centralized Version Management**

```xml
<!-- parent/pom.xml -->
<project>
    <groupId>com.company</groupId>
    <artifactId>company-parent</artifactId>
    <version>1.0.0</version>
    <packaging>pom</packaging>
    
    <properties>
        <!-- Dependency versions -->
        <spring-boot.version>3.1.5</spring-boot.version>
        <lombok.version>1.18.30</lombok.version>
        <guava.version>32.1.3-jre</guava.version>
        <junit.version>5.10.0</junit.version>
    </properties>
    
    <dependencyManagement>
        <dependencies>
            <!-- Spring Boot BOM -->
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring-boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            
            <!-- Third-party libraries -->
            <dependency>
                <groupId>org.projectlombok</groupId>
                <artifactId>lombok</artifactId>
                <version>${lombok.version}</version>
            </dependency>
            
            <dependency>
                <groupId>com.google.guava</groupId>
                <artifactId>guava</artifactId>
                <version>${guava.version}</version>
            </dependency>
            
            <!-- Testing -->
            <dependency>
                <groupId>org.junit.jupiter</groupId>
                <artifactId>junit-jupiter</artifactId>
                <version>${junit.version}</version>
            </dependency>
            
            <!-- Internal modules -->
            <dependency>
                <groupId>com.company</groupId>
                <artifactId>common-utils</artifactId>
                <version>${project.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project>
```

**✓ GOOD: Child POM Without Versions**

```xml
<!-- service/pom.xml -->
<project>
    <parent>
        <groupId>com.company</groupId>
        <artifactId>company-parent</artifactId>
        <version>1.0.0</version>
    </parent>
    
    <artifactId>user-service</artifactId>
    
    <dependencies>
        <!-- No version needed -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <scope>provided</scope>
        </dependency>
        
        <dependency>
            <groupId>com.company</groupId>
            <artifactId>common-utils</artifactId>
        </dependency>
    </dependencies>
</project>
```

**✗ BAD: Versions in Child POM**

```xml
<!-- DON'T DO THIS -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
    <version>3.1.5</version> <!-- ✗ Should be in parent -->
</dependency>
```

**Benefits:**

```
✓ Single source of truth for versions
✓ Easy to update all modules at once
✓ Prevents version conflicts
✓ Consistent dependencies across modules
✓ Easier to audit and manage
```

---

### 1.2 Import BOMs (Bill of Materials)

**✓ GOOD: Use BOMs for Related Dependencies**

```xml
<dependencyManagement>
    <dependencies>
        <!-- Spring Boot BOM -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-dependencies</artifactId>
            <version>3.1.5</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
        
        <!-- Spring Cloud BOM -->
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-dependencies</artifactId>
            <version>2022.0.4</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
        
        <!-- Jackson BOM -->
        <dependency>
            <groupId>com.fasterxml.jackson</groupId>
            <artifactId>jackson-bom</artifactId>
            <version>2.15.2</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
        
        <!-- AWS SDK BOM -->
        <dependency>
            <groupId>software.amazon.awssdk</groupId>
            <artifactId>bom</artifactId>
            <version>2.20.160</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
        
        <!-- Testcontainers BOM -->
        <dependency>
            <groupId>org.testcontainers</groupId>
            <artifactId>testcontainers-bom</artifactId>
            <version>1.19.1</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

**Benefits:**

```
✓ Tested compatible versions
✓ No manual version management
✓ Automatic transitive dependency alignment
✓ Reduced configuration
```

**Popular BOMs:**

```
Spring Boot:     spring-boot-dependencies
Spring Cloud:    spring-cloud-dependencies
Jackson:         jackson-bom
AWS SDK:         bom
JUnit:           junit-bom
Testcontainers:  testcontainers-bom
Micronaut:       micronaut-bom
Quarkus:         quarkus-bom
```

---

### 1.3 Avoid Version Ranges

**✗ BAD: Version Ranges (Not Reproducible)**

```xml
<!-- DON'T DO THIS -->
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>[30.0,)</version> <!-- ✗ Any version >= 30.0 -->
</dependency>

<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-lang3</artifactId>
    <version>[3.0,4.0)</version> <!-- ✗ Range -->
</dependency>
```

**✓ GOOD: Fixed Versions**

```xml
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>32.1.3-jre</version> <!-- ✓ Exact version -->
</dependency>

<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-lang3</artifactId>
    <version>3.13.0</version> <!-- ✓ Exact version -->
</dependency>
```

**Why Avoid Ranges:**

```
✗ Non-reproducible builds (different versions on different machines)
✗ Unexpected breaking changes
✗ Difficult to debug issues
✗ CI/CD builds may differ from local
✗ Deployment failures
```

**Exceptions:**

```
Only use ranges for:
  - Maven plugins in pluginManagement (very rare)
  - Development tools (not production dependencies)
  - When explicitly needed for compatibility
```

---

### 1.4 Pin Plugin Versions

**✓ GOOD: Pin All Plugin Versions**

```xml
<build>
    <pluginManagement>
        <plugins>
            <!-- Core plugins -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.11.0</version>
            </plugin>
            
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>3.1.2</version>
            </plugin>
            
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>3.3.0</version>
            </plugin>
            
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-clean-plugin</artifactId>
                <version>3.3.1</version>
            </plugin>
            
            <!-- Spring Boot -->
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <version>3.1.5</version>
            </plugin>
        </plugins>
    </pluginManagement>
</build>
```

**✗ BAD: No Plugin Versions**

```xml
<!-- DON'T DO THIS -->
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <!-- ✗ No version - uses whatever Maven decides -->
</plugin>
```

---

### 1.5 Enforce Versions with Maven Enforcer

**✓ GOOD: Enforce Best Practices**

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-enforcer-plugin</artifactId>
            <version>3.4.1</version>
            <executions>
                <execution>
                    <id>enforce-maven-version</id>
                    <goals>
                        <goal>enforce</goal>
                    </goals>
                    <configuration>
                        <rules>
                            <!-- Require Maven 3.8+ -->
                            <requireMavenVersion>
                                <version>[3.8.0,)</version>
                                <message>Maven 3.8.0 or higher required!</message>
                            </requireMavenVersion>
                            
                            <!-- Require Java 17+ -->
                            <requireJavaVersion>
                                <version>[17,)</version>
                                <message>Java 17 or higher required!</message>
                            </requireJavaVersion>
                            
                            <!-- Require plugin versions -->
                            <requirePluginVersions>
                                <message>All plugins must have versions!</message>
                                <banLatest>true</banLatest>
                                <banRelease>true</banRelease>
                                <banSnapshots>true</banSnapshots>
                            </requirePluginVersions>
                            
                            <!-- Ban SNAPSHOT dependencies in release -->
                            <requireReleaseDeps>
                                <message>No SNAPSHOT dependencies allowed in release!</message>
                                <onlyWhenRelease>true</onlyWhenRelease>
                            </requireReleaseDeps>
                            
                            <!-- Require dependency convergence -->
                            <dependencyConvergence/>
                            
                            <!-- Ban duplicate dependencies -->
                            <banDuplicatePomDependencyVersions/>
                            
                            <!-- Require upper bound dependencies -->
                            <requireUpperBoundDeps/>
                            
                            <!-- Ban problematic dependencies -->
                            <bannedDependencies>
                                <excludes>
                                    <exclude>commons-logging:commons-logging</exclude>
                                    <exclude>log4j:log4j</exclude>
                                    <exclude>org.slf4j:slf4j-simple</exclude>
                                </excludes>
                                <message>Use SLF4J with Logback instead!</message>
                            </bannedDependencies>
                        </rules>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

---

### 1.6 Dependency Analysis

**Check for Issues:**

```bash
# Analyze dependencies
mvn dependency:analyze

# Output example:
[WARNING] Used undeclared dependencies found:
[WARNING]    org.springframework:spring-context:jar:6.0.12:compile
[WARNING] Unused declared dependencies found:
[WARNING]    com.google.guava:guava:jar:32.1.3-jre:compile
```

**Analyze Dependency Tree:**

```bash
# Show dependency tree
mvn dependency:tree

# Show conflicts
mvn dependency:tree -Dverbose

# Find specific dependency
mvn dependency:tree -Dincludes=org.springframework:spring-core
```

**Display Dependency Updates:**

```bash
# Check for dependency updates
mvn versions:display-dependency-updates

# Check for plugin updates
mvn versions:display-plugin-updates

# Use dependencies from latest versions
mvn versions:use-latest-versions
```

---

## 2. Build Optimization

### 2.1 Parallel Builds

**Use Thread-Based Parallelism:**

```bash
# Build with 4 threads
mvn clean install -T 4

# Build with 1 thread per CPU core
mvn clean install -T 1C

# Build with 2 threads per CPU core
mvn clean install -T 2C
```

**Multi-Module Benefits:**

```
Single-threaded:
  module-a (30s) → module-b (30s) → module-c (30s) = 90s total

Parallel (3 threads):
  module-a (30s) ┐
  module-b (30s) ├─ All run simultaneously
  module-c (30s) ┘
  = 30s total
```

**When to Use:**

```
✓ Multi-module projects
✓ Independent modules (no circular dependencies)
✓ CI/CD pipelines
✓ Developer workstations with multiple cores

✗ Single-module projects (no benefit)
✗ Modules with complex interdependencies
```

---

### 2.2 Incremental Compilation

**Maven Already Does This:**

```
Maven automatically:
  ✓ Compiles only changed files
  ✓ Skips unchanged modules
  ✓ Reuses previous build artifacts
```

**Maximize Incremental Builds:**

```bash
# Don't clean if not needed
mvn install          # ✓ Incremental
mvn clean install    # ✗ Full rebuild

# Build only changed module
mvn install -pl changed-module -am

# Resume from failed module
mvn install -rf failed-module
```

**Clean When Necessary:**

```bash
# Clean before important builds
mvn clean install    # Release builds, CI/CD

# Clean when:
✓ Switching branches with major changes
✓ After dependency updates
✓ Build artifacts are corrupted
✓ Strange compilation errors
```

---

### 2.3 Offline Mode

**Use Offline Mode:**

```bash
# First build downloads dependencies
mvn clean install

# Subsequent builds use cached dependencies
mvn clean install -o
# or
mvn clean install --offline
```

**Benefits:**

```
✓ Faster builds (no network overhead)
✓ Work without internet
✓ Consistent with local cache
✓ Avoid Maven Central outages
```

**When to Use:**

```
✓ Development builds after initial setup
✓ CI/CD with pre-populated cache
✓ Offline environments
✓ Network issues

✗ First build (needs to download)
✗ After dependency changes
✗ SNAPSHOT updates needed
```

---

### 2.4 Smart Test Execution

**Skip Tests Appropriately:**

```bash
# Skip test execution (compile tests but don't run)
mvn package -DskipTests

# Skip test compilation and execution
mvn package -Dmaven.test.skip=true

# Run only specific tests
mvn test -Dtest=UserServiceTest

# Run tests matching pattern
mvn test -Dtest=*ServiceTest

# Skip integration tests only
mvn verify -DskipITs
```

**Profile-Based Test Control:**

```xml
<profiles>
    <!-- Fast development build -->
    <profile>
        <id>fast</id>
        <properties>
            <skipTests>true</skipTests>
            <maven.javadoc.skip>true</maven.javadoc.skip>
            <checkstyle.skip>true</checkstyle.skip>
        </properties>
    </profile>
    
    <!-- Full CI build -->
    <profile>
        <id>ci</id>
        <properties>
            <skipTests>false</skipTests>
            <failsafe.rerunFailingTestsCount>2</failsafe.rerunFailingTestsCount>
        </properties>
    </profile>
</profiles>
```

**When to Skip Tests:**

```
✓ Local rapid development iterations
✓ Building to check compilation only
✓ Packaging for manual testing

✗ CI/CD builds
✗ Release builds
✗ Before committing/pushing
✗ Pull request builds
```

---

### 2.5 Build Cache Optimization

**Use Maven Build Cache (Experimental):**

```xml
<!-- .mvn/maven.config -->
<configuration>
    <cache>
        <enabled>true</enabled>
        <baseDir>~/.m2/build-cache</baseDir>
    </cache>
</configuration>
```

**Local Repository Optimization:**

```bash
# Purge old SNAPSHOT versions
mvn dependency:purge-local-repository

# Remove all local artifacts
rm -rf ~/.m2/repository

# Set custom local repository location
mvn clean install -Dmaven.repo.local=/path/to/repo
```

---

## 3. Project Structure

### 3.1 Follow Standard Directory Layout

**✓ GOOD: Standard Maven Layout**

```
project/
├── pom.xml
├── src/
│   ├── main/
│   │   ├── java/              # Java source code
│   │   │   └── com/company/app/
│   │   ├── resources/         # Resources (properties, XML, etc.)
│   │   │   ├── application.yml
│   │   │   ├── logback.xml
│   │   │   └── static/
│   │   └── webapp/            # Web resources (WAR only)
│   │       ├── WEB-INF/
│   │       └── index.html
│   │
│   ├── test/
│   │   ├── java/              # Test code
│   │   │   └── com/company/app/
│   │   └── resources/         # Test resources
│   │       └── application-test.yml
│   │
│   └── site/                  # Site documentation (optional)
│       └── markdown/
│
└── target/                    # Build output (gitignored)
```

**✗ BAD: Non-Standard Layout**

```
# DON'T DO THIS
project/
├── source/           # ✗ Should be src/main/java
├── tests/            # ✗ Should be src/test/java
├── config/           # ✗ Should be src/main/resources
└── build/            # ✗ Should be target/
```

**Benefits of Standard Layout:**

```
✓ Works with all IDEs automatically
✓ No POM configuration needed
✓ All Maven plugins work
✓ Everyone knows where things are
✓ Easier to onboard new developers
```

---

### 3.2 Multi-Module Organization

**✓ GOOD: Clear Module Structure**

```
company-platform/
├── pom.xml                    # Parent/Aggregator
│
├── platform-common/           # Shared utilities
│   ├── pom.xml
│   └── src/
│
├── platform-api/              # API contracts
│   ├── pom.xml
│   └── src/
│
├── user-service/              # Business service
│   ├── pom.xml
│   └── src/
│
├── order-service/             # Business service
│   ├── pom.xml
│   └── src/
│
└── web-app/                   # Frontend
    ├── pom.xml
    └── src/
```

**Module Dependencies:**

```
common ← api ← services ← web-app

✓ Clear dependency flow
✓ No circular dependencies
✓ Layered architecture
```

---

### 3.3 Layer Separation

**✓ GOOD: Separate Concerns**

```
user-service/
└── src/main/java/com/company/user/
    ├── controller/         # REST controllers
    │   └── UserController.java
    │
    ├── service/            # Business logic
    │   ├── UserService.java
    │   └── impl/
    │       └── UserServiceImpl.java
    │
    ├── repository/         # Data access
    │   └── UserRepository.java
    │
    ├── model/              # Domain models
    │   ├── entity/
    │   │   └── User.java
    │   └── dto/
    │       ├── UserRequest.java
    │       └── UserResponse.java
    │
    ├── mapper/             # DTO mappers
    │   └── UserMapper.java
    │
    ├── exception/          # Custom exceptions
    │   └── UserNotFoundException.java
    │
    └── config/             # Configuration
        └── SecurityConfig.java
```

---

### 3.4 Separate API and Implementation

**✓ GOOD: API Module Pattern**

```
# API module (interfaces only)
user-api/
└── src/main/java/com/company/user/api/
    ├── UserService.java           # Interface
    ├── dto/
    │   ├── UserRequest.java
    │   └── UserResponse.java
    └── exception/
        └── UserException.java

# Implementation module
user-service/
├── pom.xml                        # Depends on user-api
└── src/main/java/com/company/user/
    ├── service/
    │   └── UserServiceImpl.java  # Implements interface
    └── repository/
        └── UserRepository.java
```

**Benefits:**

```
✓ Clients depend only on API
✓ Multiple implementations possible
✓ Clear contract definition
✓ Better testing (mock implementations)
✓ Reduced coupling
```

---

## 4. Settings.xml Configuration

### 4.1 Optimal settings.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.2.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.2.0
                              http://maven.apache.org/xsd/settings-1.2.0.xsd">
    
    <!-- Local repository location -->
    <localRepository>${user.home}/.m2/repository</localRepository>
    
    <!-- Offline mode (if needed) -->
    <offline>false</offline>
    
    <!-- Plugin groups for short plugin names -->
    <pluginGroups>
        <pluginGroup>org.springframework.boot</pluginGroup>
        <pluginGroup>org.apache.maven.plugins</pluginGroup>
    </pluginGroups>
    
    <!-- Server credentials -->
    <servers>
        <!-- Company Nexus -->
        <server>
            <id>company-nexus</id>
            <username>${env.NEXUS_USERNAME}</username>
            <password>${env.NEXUS_PASSWORD}</password>
        </server>
        
        <!-- GitHub Packages -->
        <server>
            <id>github</id>
            <username>${env.GITHUB_USERNAME}</username>
            <password>${env.GITHUB_TOKEN}</password>
        </server>
        
        <!-- Maven Central (for releases) -->
        <server>
            <id>ossrh</id>
            <username>${env.OSSRH_USERNAME}</username>
            <password>${env.OSSRH_PASSWORD}</password>
        </server>
    </servers>
    
    <!-- Mirrors for faster downloads -->
    <mirrors>
        <!-- Company mirror for all repositories -->
        <mirror>
            <id>company-mirror</id>
            <n>Company Maven Mirror</n>
            <url>https://nexus.company.com/repository/maven-public/</url>
            <mirrorOf>*</mirrorOf>
        </mirror>
    </mirrors>
    
    <!-- Profiles -->
    <profiles>
        <!-- Company repository profile -->
        <profile>
            <id>company-repos</id>
            <repositories>
                <repository>
                    <id>company-releases</id>
                    <n>Company Releases</n>
                    <url>https://nexus.company.com/repository/maven-releases/</url>
                    <releases>
                        <enabled>true</enabled>
                        <updatePolicy>never</updatePolicy>
                    </releases>
                    <snapshots>
                        <enabled>false</enabled>
                    </snapshots>
                </repository>
                
                <repository>
                    <id>company-snapshots</id>
                    <n>Company Snapshots</n>
                    <url>https://nexus.company.com/repository/maven-snapshots/</url>
                    <releases>
                        <enabled>false</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                        <updatePolicy>daily</updatePolicy>
                    </snapshots>
                </repository>
            </repositories>
            
            <pluginRepositories>
                <pluginRepository>
                    <id>company-plugins</id>
                    <url>https://nexus.company.com/repository/maven-plugins/</url>
                </pluginRepository>
            </pluginRepositories>
        </profile>
        
        <!-- Java version profile -->
        <profile>
            <id>java-17</id>
            <activation>
                <jdk>17</jdk>
            </activation>
            <properties>
                <maven.compiler.source>17</maven.compiler.source>
                <maven.compiler.target>17</maven.compiler.target>
            </properties>
        </profile>
    </profiles>
    
    <!-- Active profiles -->
    <activeProfiles>
        <activeProfile>company-repos</activeProfile>
    </activeProfiles>
</settings>
```

---

### 4.2 Mirror Configuration

**Mirror Maven Central:**

```xml
<mirrors>
    <!-- Option 1: Company mirror for everything -->
    <mirror>
        <id>company-mirror</id>
        <n>Company Mirror</n>
        <url>https://nexus.company.com/repository/maven-public/</url>
        <mirrorOf>*</mirrorOf>
    </mirror>
    
    <!-- Option 2: Mirror only Maven Central -->
    <mirror>
        <id>central-mirror</id>
        <n>Maven Central Mirror</n>
        <url>https://nexus.company.com/repository/maven-central/</url>
        <mirrorOf>central</mirrorOf>
    </mirror>
    
    <!-- Option 3: Mirror all except internal -->
    <mirror>
        <id>external-mirror</id>
        <url>https://nexus.company.com/repository/maven-public/</url>
        <mirrorOf>*,!company-internal</mirrorOf>
    </mirror>
</mirrors>
```

**mirrorOf Patterns:**

```
*                  → Mirror everything
central            → Mirror only Maven Central
*,!repo1           → Mirror everything except repo1
external:*         → Mirror only external repositories
repo1,repo2        → Mirror specific repositories
```

---

### 4.3 Encrypted Passwords

**Create Master Password:**

```bash
# Generate master password
mvn --encrypt-master-password
Master password: ****
{jSMOWnoPFgsHVpMvz5VrIt5kRbzGpI8u+9EF1iFQyJQ=}
```

**Save Master Password:**

```xml
<!-- ~/.m2/settings-security.xml -->
<settingsSecurity>
    <master>{jSMOWnoPFgsHVpMvz5VrIt5kRbzGpI8u+9EF1iFQyJQ=}</master>
</settingsSecurity>
```

**Encrypt Server Password:**

```bash
# Encrypt password
mvn --encrypt-password
Password: ****
{COQLCE6DU6GtcS5P=}
```

**Use Encrypted Password:**

```xml
<!-- ~/.m2/settings.xml -->
<servers>
    <server>
        <id>company-nexus</id>
        <username>developer</username>
        <password>{COQLCE6DU6GtcS5P=}</password>
    </server>
</servers>
```

**Or Use Environment Variables (Recommended):**

```xml
<servers>
    <server>
        <id>company-nexus</id>
        <username>${env.NEXUS_USERNAME}</username>
        <password>${env.NEXUS_PASSWORD}</password>
    </server>
</servers>
```

---

### 4.4 Plugin Groups

**Short Plugin Names:**

```xml
<pluginGroups>
    <pluginGroup>org.springframework.boot</pluginGroup>
    <pluginGroup>org.apache.maven.plugins</pluginGroup>
</pluginGroups>
```

**Usage:**

```bash
# With plugin group
mvn spring-boot:run

# Without plugin group (full name required)
mvn org.springframework.boot:spring-boot-maven-plugin:run
```

---

## 5. Additional Best Practices

### 5.1 Version Control

**.gitignore:**

```
# Maven
target/
pom.xml.tag
pom.xml.releaseBackup
pom.xml.versionsBackup
pom.xml.next
release.properties
dependency-reduced-pom.xml
buildNumber.properties
.mvn/timing.properties
.mvn/wrapper/maven-wrapper.jar

# IDE
.idea/
*.iml
.vscode/
.classpath
.project
.settings/

# OS
.DS_Store
Thumbs.db
```

**Include in Version Control:**

```
✓ pom.xml
✓ src/
✓ README.md
✓ .gitignore
✓ .mvn/wrapper/ (Maven wrapper)

✗ target/
✗ .idea/
✗ *.iml
```

---

### 5.2 Documentation

**README.md:**

````markdown
# Project Name

## Build

```bash
# Build project
mvn clean install

# Run tests
mvn test

# Run application
mvn spring-boot:run
````

## Requirements

- Java 17+
- Maven 3.8+

## Project Structure

- `common/` - Shared utilities
- `api/` - API contracts
- `service/` - Business logic
- `web/` - Web application

## Profiles

- `dev` - Development (default, H2 database)
- `test` - Testing (PostgreSQL with Testcontainers)
- `prod` - Production (PostgreSQL)

````

---

### 5.3 Reproducible Builds

**Lock Down Versions:**
```xml
<properties>
    <!-- Dependency versions -->
    <spring-boot.version>3.1.5</spring-boot.version>
    <lombok.version>1.18.30</lombok.version>
    
    <!-- Plugin versions -->
    <maven-compiler-plugin.version>3.11.0</maven-compiler-plugin.version>
    <maven-surefire-plugin.version>3.1.2</maven-surefire-plugin.version>
    
    <!-- Build properties -->
    <maven.build.timestamp.format>yyyy-MM-dd'T'HH:mm:ss'Z'</maven.build.timestamp.format>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
````

**Enforce Reproducibility:**

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-enforcer-plugin</artifactId>
    <version>3.4.1</version>
    <executions>
        <execution>
            <id>enforce-reproducible-builds</id>
            <goals>
                <goal>enforce</goal>
            </goals>
            <configuration>
                <rules>
                    <requireMavenVersion>
                        <version>[3.8.0,)</version>
                    </requireMavenVersion>
                    <requireJavaVersion>
                        <version>[17,)</version>
                    </requireJavaVersion>
                    <requirePluginVersions/>
                    <requireReleaseDeps>
                        <onlyWhenRelease>true</onlyWhenRelease>
                    </requireReleaseDeps>
                </rules>
            </configuration>
        </execution>
    </executions>
</plugin>
```

---

### 5.4 Clean Code Practices

**Use Properties for Magic Values:**

```xml
<!-- ✗ BAD -->
<configuration>
    <source>17</source>
    <target>17</target>
</configuration>

<!-- ✓ GOOD -->
<properties>
    <java.version>17</java.version>
</properties>

<configuration>
    <source>${java.version}</source>
    <target>${java.version}</target>
</configuration>
```

**DRY (Don't Repeat Yourself):**

```xml
<!-- ✓ GOOD: Define once in parent -->
<pluginManagement>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.11.0</version>
            <configuration>
                <source>${java.version}</source>
                <target>${java.version}</target>
            </configuration>
        </plugin>
    </plugins>
</pluginManagement>
```

---

### 5.5 CI/CD Integration

**GitHub Actions Example:**

```yaml
# .github/workflows/build.yml
name: Build

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up JDK 17
      uses: actions/setup-java@v3
      with:
        java-version: '17'
        distribution: 'temurin'
        cache: maven
    
    - name: Build with Maven
      run: mvn clean verify -B
      
    - name: Upload coverage
      uses: codecov/codecov-action@v3
```

**GitLab CI Example:**

```yaml
# .gitlab-ci.yml
stages:
  - build
  - test
  - deploy

variables:
  MAVEN_OPTS: "-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository"

cache:
  paths:
    - .m2/repository

build:
  stage: build
  image: maven:3.9-eclipse-temurin-17
  script:
    - mvn clean package -DskipTests
  artifacts:
    paths:
      - target/*.jar

test:
  stage: test
  image: maven:3.9-eclipse-temurin-17
  script:
    - mvn verify
```

---

## Summary

### Quick Reference Checklist

**Dependency Management:**

```
✓ Use dependencyManagement in parent POM
✓ Import BOMs (Spring Boot, Jackson, etc.)
✓ Pin all versions (no ranges)
✓ Pin all plugin versions
✓ Use maven-enforcer-plugin
✓ Run dependency:analyze regularly
```

**Build Optimization:**

```
✓ Use parallel builds (mvn -T 4)
✓ Use offline mode after first build (mvn -o)
✓ Don't clean unless necessary
✓ Skip tests when appropriate (development only)
✓ Build only changed modules
```

**Project Structure:**

```
✓ Follow standard directory layout
✓ Use multi-module for large projects
✓ Separate API and implementation
✓ Clear layer separation
✓ Logical module boundaries
```

**Configuration:**

```
✓ Configure settings.xml properly
✓ Use mirrors for faster downloads
✓ Encrypt passwords or use environment variables
✓ Set up plugin groups
✓ Configure active profiles
```

**Version Control:**

```
✓ Complete .gitignore
✓ Include Maven wrapper
✓ Document build process in README
✓ Never commit target/
✓ Never commit IDE files
```

### Common Commands

```bash
# Optimal build
mvn clean install -T 4 -o

# Check for updates
mvn versions:display-dependency-updates
mvn versions:display-plugin-updates

# Analyze dependencies
mvn dependency:analyze
mvn dependency:tree -Dverbose

# Enforce best practices
mvn enforcer:enforce

# View effective POM
mvn help:effective-pom

# Update versions
mvn versions:set -DnewVersion=2.0.0
```
