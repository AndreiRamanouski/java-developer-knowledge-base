## Overview

Even with proper configuration, Maven builds can fail. This guide covers common issues, debugging techniques, and solutions to get your builds working again.

```
┌─────────────────────────────────────────────────────────────────┐
│                  MAVEN TROUBLESHOOTING WORKFLOW                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. Identify Problem                                            │
│     ├── Read error message                                     │
│     ├── Check build output                                     │
│     └── Note when it fails                                     │
│                                                                 │
│  2. Gather Information                                          │
│     ├── mvn -X (debug output)                                  │
│     ├── mvn -e (stacktrace)                                    │
│     ├── dependency:tree                                        │
│     └── help:effective-pom                                     │
│                                                                 │
│  3. Common Fixes                                                │
│     ├── Clean local repository                                 │
│     ├── Update dependencies                                    │
│     ├── Check network/repositories                             │
│     └── Verify versions                                        │
│                                                                 │
│  4. Advanced Debugging                                          │
│     ├── Isolate the problem                                    │
│     ├── Test in clean environment                              │
│     ├── Check Maven version                                    │
│     └── Review logs                                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 1. Common Issues

### 1.1 Dependency Conflicts

**Problem: Multiple versions of the same dependency**

**Symptoms:**

```
[WARNING] Some problems were encountered while building the effective model
[WARNING] 'dependencies.dependency.version' for com.google.guava:guava:jar
must be a valid version but is '${guava.version}'.
```

**Diagnose:**

```bash
# View full dependency tree
mvn dependency:tree

# Show conflicts with verbose output
mvn dependency:tree -Dverbose

# Output example:
[INFO] com.company:my-app:jar:1.0.0-SNAPSHOT
[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:3.1.5:compile
[INFO] |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.2:compile
[INFO] |  |  \- (com.fasterxml.jackson.core:jackson-core:jar:2.15.2:compile - omitted for duplicate)
[INFO] +- com.company:legacy-lib:jar:1.0.0:compile
[INFO] |  \- (com.fasterxml.jackson.core:jackson-core:jar:2.12.0:compile - omitted for conflict with 2.15.2)
```

**Key Indicators:**

```
"omitted for conflict"   → Version conflict resolved by Maven
"omitted for duplicate"  → Same version found multiple times
```

**Find Specific Dependency:**

```bash
# Find all paths to a specific dependency
mvn dependency:tree -Dincludes=com.google.guava:guava

# Find specific group
mvn dependency:tree -Dincludes=org.springframework

# Find by artifact
mvn dependency:tree -Dincludes=:jackson-databind
```

**Solution 1: Explicit Version Declaration**

```xml
<dependencies>
    <!-- Explicitly declare the version you want -->
    <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>32.1.3-jre</version>
    </dependency>
    
    <!-- Other dependencies will use this version -->
</dependencies>
```

**Solution 2: Use DependencyManagement**

```xml
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>32.1.3-jre</version>
        </dependency>
    </dependencies>
</dependencyManagement>
```

**Solution 3: Exclude Conflicting Transitive Dependency**

```xml
<dependency>
    <groupId>com.company</groupId>
    <artifactId>legacy-lib</artifactId>
    <version>1.0.0</version>
    <exclusions>
        <exclusion>
            <!-- Exclude old version -->
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-core</artifactId>
        </exclusion>
    </exclusions>
</dependency>

<!-- Use newer version explicitly -->
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.15.2</version>
</dependency>
```

**Solution 4: Enforce Dependency Convergence**

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-enforcer-plugin</artifactId>
            <version>3.4.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>enforce</goal>
                    </goals>
                    <configuration>
                        <rules>
                            <dependencyConvergence/>
                        </rules>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

---

### 1.2 Plugin Not Found

**Problem: Maven can't find a plugin**

**Error Message:**

```
[ERROR] Plugin org.springframework.boot:spring-boot-maven-plugin:3.1.5 
or one of its dependencies could not be resolved: 
Failed to read artifact descriptor
```

**Cause 1: Missing Plugin Repository**

```xml
<!-- Solution: Add plugin repository -->
<pluginRepositories>
    <pluginRepository>
        <id>spring-releases</id>
        <url>https://repo.spring.io/release</url>
    </pluginRepository>
</pluginRepositories>
```

**Cause 2: Typo in Plugin Coordinates**

```xml
<!-- ✗ WRONG: Incorrect groupId -->
<plugin>
    <groupId>org.spring.boot</groupId> <!-- ✗ -->
    <artifactId>spring-boot-maven-plugin</artifactId>
    <version>3.1.5</version>
</plugin>

<!-- ✓ CORRECT -->
<plugin>
    <groupId>org.springframework.boot</groupId> <!-- ✓ -->
    <artifactId>spring-boot-maven-plugin</artifactId>
    <version>3.1.5</version>
</plugin>
```

**Cause 3: Network/Repository Issues**

```bash
# Check if plugin exists in Maven Central
# Visit: https://search.maven.org/

# Force re-download
mvn clean install -U

# Check repository settings
mvn help:effective-settings
```

**Cause 4: Corrupted Local Repository**

```bash
# Delete plugin from local repository
rm -rf ~/.m2/repository/org/springframework/boot/spring-boot-maven-plugin

# Re-download
mvn clean install
```

---

### 1.3 Build Failures

**Problem: Build fails with unclear error**

**Get More Information:**

```bash
# Show error stacktrace
mvn clean install -e

# Full debug output
mvn clean install -X

# Quiet mode (errors only)
mvn clean install -q

# Show version info
mvn -v
```

**Common Build Failures:**

#### Compilation Errors

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile
[ERROR] Compilation failure
[ERROR] /path/to/File.java:[10,8] cannot find symbol
```

**Solution:**

```bash
# Clean and rebuild
mvn clean compile

# Check Java version
mvn -v
java -version

# Verify source/target in POM
<properties>
    <maven.compiler.source>17</maven.compiler.source>
    <maven.compiler.target>17</maven.compiler.target>
</properties>
```

#### Test Failures

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.1.2:test
[ERROR] There are test failures.
```

**Solution:**

```bash
# Run tests with more output
mvn test -X

# Run specific test
mvn test -Dtest=UserServiceTest

# Skip tests temporarily
mvn package -DskipTests

# View test reports
cat target/surefire-reports/*.txt
```

#### Out of Memory

```
[ERROR] Java heap space
[ERROR] GC overhead limit exceeded
```

**Solution:**

```bash
# Increase Maven memory (Linux/Mac)
export MAVEN_OPTS="-Xmx2g -XX:MaxPermSize=512m"
mvn clean install

# Windows
set MAVEN_OPTS=-Xmx2g -XX:MaxPermSize=512m
mvn clean install

# Or in .mvn/jvm.config
-Xmx2g
-XX:MaxPermSize=512m
```

#### Missing Dependencies

```
[ERROR] Failed to execute goal on project my-app: 
Could not resolve dependencies for project com.company:my-app:jar:1.0.0-SNAPSHOT:
The following artifacts could not be resolved: 
com.company:some-lib:jar:1.0.0
```

**Solution:**

```bash
# Check if dependency exists
mvn dependency:get -Dartifact=com.company:some-lib:1.0.0

# Force update
mvn clean install -U

# Check effective POM
mvn help:effective-pom | grep some-lib
```

---

### 1.4 Corrupted Local Repository

**Problem: Strange errors, inconsistent builds**

**Symptoms:**

```
- Build works on one machine but not another
- "Artifact has been tampered with" errors
- Checksum validation failures
- ClassNotFoundException at runtime but compiles fine
```

**Nuclear Option: Delete Local Repository**

```bash
# Backup first (optional)
cp -r ~/.m2/repository ~/maven-backup

# Delete entire local repository
rm -rf ~/.m2/repository

# Rebuild (will download everything)
mvn clean install
```

**Surgical Option: Delete Specific Artifacts**

```bash
# Delete specific dependency
rm -rf ~/.m2/repository/org/springframework/boot

# Delete all SNAPSHOT versions
find ~/.m2/repository -type d -name "*-SNAPSHOT" -exec rm -rf {} +

# Delete only old SNAPSHOTs
mvn dependency:purge-local-repository -DreResolve=false
```

**Prevent Corruption:**

```bash
# Always use -U for SNAPSHOT updates
mvn clean install -U

# Use checksumPolicy in repository configuration
<repository>
    <id>central</id>
    <url>https://repo.maven.apache.org/maven2</url>
    <releases>
        <checksumPolicy>fail</checksumPolicy>
    </releases>
</repository>
```

---

### 1.5 Network/Repository Issues

**Problem: Can't download dependencies**

**Error Messages:**

```
[ERROR] Failed to collect dependencies at org.springframework.boot:spring-boot-starter-web:jar:3.1.5
[ERROR] Failed to read artifact descriptor
[ERROR] Could not transfer artifact
[ERROR] Connection timed out
```

**Check Network Connectivity:**

```bash
# Test Maven Central
curl -I https://repo.maven.apache.org/maven2/

# Test custom repository
curl -I https://nexus.company.com/repository/maven-public/

# Check proxy settings
mvn help:effective-settings | grep -A 10 proxy
```

**Configure Proxy:**

```xml
<!-- ~/.m2/settings.xml -->
<settings>
    <proxies>
        <proxy>
            <id>company-proxy</id>
            <active>true</active>
            <protocol>http</protocol>
            <host>proxy.company.com</host>
            <port>8080</port>
            <username>proxyuser</username>
            <password>proxypass</password>
            <nonProxyHosts>localhost|127.0.0.1|*.company.com</nonProxyHosts>
        </proxy>
    </proxies>
</settings>
```

**Use Mirror for Reliability:**

```xml
<mirrors>
    <mirror>
        <id>company-mirror</id>
        <mirrorOf>central</mirrorOf>
        <url>https://nexus.company.com/repository/maven-public/</url>
    </mirror>
</mirrors>
```

**Work Offline:**

```bash
# Use only local repository
mvn clean install -o
mvn clean install --offline
```

---

### 1.6 Multi-Module Build Issues

**Problem: Modules build in wrong order**

**Error:**

```
[ERROR] Failed to execute goal on project service-b: 
Could not resolve dependencies for project com.company:service-b:jar:1.0.0:
Could not find artifact com.company:service-a:jar:1.0.0
```

**Check Reactor Order:**

```bash
# View build order
mvn clean install -X | grep "Reactor Build Order"

# Output:
[INFO] Reactor Build Order:
[INFO] 
[INFO] parent                                    [pom]
[INFO] service-a                                 [jar]
[INFO] service-b                                 [jar]
```

**Solution: Declare Dependencies Correctly**

```xml
<!-- service-b/pom.xml -->
<dependencies>
    <!-- Maven will build service-a first -->
    <dependency>
        <groupId>com.company</groupId>
        <artifactId>service-a</artifactId>
        <version>${project.version}</version>
    </dependency>
</dependencies>
```

**Build Specific Module:**

```bash
# Build module and its dependencies
mvn clean install -pl service-b -am

# Build from specific module
mvn clean install -rf service-b

# Build multiple modules
mvn clean install -pl service-a,service-b
```

---

### 1.7 Version Conflicts

**Problem: Property not resolved**

**Error:**

```
[WARNING] 'dependencies.dependency.version' for com.google.guava:guava:jar 
is either LATEST, RELEASE or a snapshot version, which is not allowed in release
```

**Check Effective POM:**

```bash
# View final POM after interpolation
mvn help:effective-pom

# Search for specific property
mvn help:effective-pom | grep guava.version
```

**Common Causes:**

**Cause 1: Property Not Defined**

```xml
<!-- ✗ WRONG: Property used but not defined -->
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>${guava.version}</version> <!-- ✗ Not defined -->
</dependency>

<!-- ✓ CORRECT: Define property -->
<properties>
    <guava.version>32.1.3-jre</guava.version>
</properties>
```

**Cause 2: Typo in Property Name**

```xml
<properties>
    <guava.version>32.1.3-jre</guava.version>
</properties>

<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>${guave.version}</version> <!-- ✗ Typo: guave vs guava -->
</dependency>
```

**Cause 3: Property in Wrong Scope**

```xml
<!-- Property defined in profile -->
<profiles>
    <profile>
        <id>dev</id>
        <properties>
            <guava.version>32.1.3-jre</guava.version>
        </properties>
    </profile>
</profiles>

<!-- Solution: Move to main properties or activate profile -->
<properties>
    <guava.version>32.1.3-jre</guava.version>
</properties>
```

---

## 2. Useful Debugging Commands

### 2.1 Dependency Analysis

**View Dependency Tree:**

```bash
# Full dependency tree
mvn dependency:tree

# Save to file
mvn dependency:tree > dependencies.txt

# Show only direct dependencies
mvn dependency:tree -Dverbose=false

# Show conflicts
mvn dependency:tree -Dverbose

# Filter by groupId
mvn dependency:tree -Dincludes=org.springframework

# Filter by scope
mvn dependency:tree -Dscope=compile
mvn dependency:tree -Dscope=test

# Exclude specific dependencies
mvn dependency:tree -Dexcludes=org.slf4j
```

**Analyze Dependencies:**

```bash
# Find unused/undeclared dependencies
mvn dependency:analyze

# Output example:
[WARNING] Used undeclared dependencies found:
[WARNING]    org.springframework:spring-context:jar:6.0.12:compile
[WARNING] Unused declared dependencies found:
[WARNING]    com.google.guava:guava:jar:32.1.3-jre:compile

# Analyze and fail build if issues found
mvn dependency:analyze-only

# Analyze duplicates
mvn dependency:analyze-duplicate

# Analyze dependency management
mvn dependency:analyze-dep-mgt
```

**List Dependencies:**

```bash
# List all dependencies
mvn dependency:list

# List only resolved dependencies
mvn dependency:resolve

# List plugins
mvn dependency:resolve-plugins

# Copy dependencies to target/dependency
mvn dependency:copy-dependencies

# Copy dependencies with specific scope
mvn dependency:copy-dependencies -DincludeScope=runtime
```

---

### 2.2 POM Inspection

**Effective POM:**

```bash
# View complete effective POM
mvn help:effective-pom

# Save to file
mvn help:effective-pom -Doutput=effective-pom.xml

# View for specific module
mvn help:effective-pom -pl my-module

# View with specific profile
mvn help:effective-pom -Pprod
```

**Effective Settings:**

```bash
# View active settings
mvn help:effective-settings

# Save to file
mvn help:effective-settings -Doutput=effective-settings.xml

# View specific sections
mvn help:effective-settings | grep -A 20 mirrors
mvn help:effective-settings | grep -A 20 profiles
```

**Describe Plugin:**

```bash
# Describe plugin
mvn help:describe -Dplugin=compiler

# Describe specific goal
mvn help:describe -Dplugin=compiler -Dgoal=compile

# Full details
mvn help:describe -Dplugin=compiler -Ddetail

# Describe by coordinates
mvn help:describe -DgroupId=org.apache.maven.plugins -DartifactId=maven-compiler-plugin
```

**Active Profiles:**

```bash
# Show active profiles
mvn help:active-profiles

# Show all profiles
mvn help:all-profiles

# Activate and show
mvn help:active-profiles -Pprod
```

---

### 2.3 Version Management

**Display Dependency Updates:**

```bash
# Check for dependency updates
mvn versions:display-dependency-updates

# Output example:
[INFO] The following dependencies in Dependencies have newer versions:
[INFO]   com.google.guava:guava ...................... 32.1.3-jre -> 33.0.0-jre
[INFO]   org.junit.jupiter:junit-jupiter ................. 5.10.0 -> 5.10.1

# Check for plugin updates
mvn versions:display-plugin-updates

# Check for property updates
mvn versions:display-property-updates
```

**Update Versions:**

```bash
# Update to next version
mvn versions:set -DnewVersion=2.0.0

# Update and commit
mvn versions:set -DnewVersion=2.0.0
mvn versions:commit

# Revert if needed
mvn versions:revert

# Update parent version
mvn versions:update-parent

# Use latest releases
mvn versions:use-latest-releases

# Use latest versions (including snapshots)
mvn versions:use-latest-versions

# Update specific dependency
mvn versions:use-next-releases -Dincludes=com.google.guava:guava
```

---

### 2.4 Debugging Output

**Debug Levels:**

```bash
# Quiet (errors only)
mvn clean install -q

# Normal output (default)
mvn clean install

# Show stacktraces
mvn clean install -e

# Full debug output
mvn clean install -X

# Debug specific goal
mvn dependency:tree -X
```

**Debug Output Analysis:**

```bash
# Save debug output
mvn clean install -X > build-debug.log 2>&1

# Search for specific issues
grep ERROR build-debug.log
grep "Could not" build-debug.log
grep "Failed to" build-debug.log
```

**Useful Information in Debug Output:**

```
- Effective POM being used
- Repository URLs being checked
- Dependencies being downloaded
- Plugin execution details
- Property resolution
- Profile activation
```

---

### 2.5 Validation

**Validate POM:**

```bash
# Validate POM structure
mvn validate

# Validate effective POM
mvn help:effective-pom | xmllint --format -

# Check POM syntax
mvn validate -e
```

**Enforcer Plugin Checks:**

```bash
# Run enforcer rules
mvn enforcer:enforce

# Display info about failed rules
mvn enforcer:display-info
```

---

## 3. Performance Tuning

### 3.1 Increase Memory

**Set Maven Memory:**

```bash
# Linux/Mac - Temporary
export MAVEN_OPTS="-Xmx2g -XX:MaxMetaspaceSize=512m -XX:ReservedCodeCacheSize=240m"
mvn clean install

# Linux/Mac - Permanent (add to ~/.bashrc or ~/.zshrc)
echo 'export MAVEN_OPTS="-Xmx2g -XX:MaxMetaspaceSize=512m"' >> ~/.bashrc

# Windows - Temporary
set MAVEN_OPTS=-Xmx2g -XX:MaxMetaspaceSize=512m
mvn clean install

# Windows - Permanent (System Properties → Environment Variables)
MAVEN_OPTS=-Xmx2g -XX:MaxMetaspaceSize=512m
```

**Project-Specific Memory (.mvn/jvm.config):**

```
# project/.mvn/jvm.config
-Xmx2g
-XX:MaxMetaspaceSize=512m
-XX:ReservedCodeCacheSize=240m
-XX:+UseG1GC
```

**Memory Recommendations:**

```
Small projects:     -Xmx512m
Medium projects:    -Xmx1g
Large projects:     -Xmx2g
Multi-module:       -Xmx4g
```

---

### 3.2 Parallel Builds

**Thread-Based Parallelism:**

```bash
# Use 4 threads
mvn clean install -T 4

# Use 1 thread per CPU core
mvn clean install -T 1C

# Use 2 threads per CPU core
mvn clean install -T 2C

# Use half of available cores
mvn clean install -T 0.5C
```

**Performance Comparison:**

```
Single-threaded build:
  module-a: 30s
  module-b: 30s
  module-c: 30s
  Total: 90s

Parallel build (-T 4):
  module-a, module-b, module-c: 30s (concurrent)
  Total: 30s (3x faster)
```

**When Parallel Builds Help:**

```
✓ Multi-module projects
✓ Modules with minimal dependencies
✓ Independent test suites
✓ Multi-core CPUs

✗ Single-module projects
✗ Circular dependencies
✗ Shared resources in tests
```

**Caution:**

```
- May cause test failures if tests share state
- Resource-intensive (CPU, memory)
- Harder to debug build issues
- Log output interleaved
```

---

### 3.3 Build Cache (Maven 3.9+)

**Enable Build Cache:**

```xml
<!-- .mvn/extensions.xml -->
<extensions>
    <extension>
        <groupId>org.apache.maven.extensions</groupId>
        <artifactId>maven-build-cache-extension</artifactId>
        <version>1.0.0</version>
    </extension>
</extensions>
```

**Configure Build Cache:**

```xml
<!-- .mvn/maven-build-cache-config.xml -->
<cache xmlns="http://maven.apache.org/BUILD-CACHE-CONFIG/1.0.0">
    <configuration>
        <enabled>true</enabled>
        <hashAlgorithm>SHA-256</hashAlgorithm>
        <validateXml>true</validateXml>
        <remote>
            <enabled>false</enabled>
        </remote>
        <local>
            <maxBuildsCached>5</maxBuildsCached>
        </local>
    </configuration>
    
    <input>
        <global>
            <glob>pom.xml</glob>
            <glob>src/**</glob>
        </global>
    </input>
    
    <executionControl>
        <runAlways>
            <plugins>
                <plugin artifactId="maven-enforcer-plugin"/>
            </plugins>
        </runAlways>
    </executionControl>
</cache>
```

**Build Cache Benefits:**

```
✓ Reuse build results across branches
✓ Skip unchanged modules
✓ Faster incremental builds
✓ Share cache in team (remote cache)
```

---

### 3.4 Optimize Plugin Execution

**Skip Unnecessary Plugins:**

```bash
# Skip tests
mvn package -DskipTests

# Skip all documentation
mvn package -Dmaven.javadoc.skip=true -Dmaven.source.skip=true

# Skip code quality checks
mvn package -Dcheckstyle.skip=true -Dpmd.skip=true -Dspotbugs.skip=true
```

**Use Fast Profile:**

```xml
<profiles>
    <profile>
        <id>fast</id>
        <properties>
            <skipTests>true</skipTests>
            <maven.javadoc.skip>true</maven.javadoc.skip>
            <maven.source.skip>true</maven.source.skip>
            <checkstyle.skip>true</checkstyle.skip>
            <pmd.skip>true</pmd.skip>
            <jacoco.skip>true</jacoco.skip>
        </properties>
    </profile>
</profiles>
```

```bash
mvn clean package -Pfast
```

---

### 3.5 Repository Performance

**Use Local Mirror:**

```xml
<mirrors>
    <mirror>
        <id>local-mirror</id>
        <mirrorOf>*</mirrorOf>
        <url>http://localhost:8081/repository/maven-public/</url>
    </mirror>
</mirrors>
```

**Disable Snapshot Updates:**

```xml
<repository>
    <id>central</id>
    <url>https://repo.maven.apache.org/maven2</url>
    <snapshots>
        <enabled>false</enabled>
    </snapshots>
</repository>
```

**Use Offline Mode:**

```bash
# After initial download
mvn clean install -o
```

---

## 4. Debugging Strategies

### 4.1 Systematic Debugging

**Step 1: Isolate the Problem**

```bash
# Does it build on a clean checkout?
git clone <repo>
cd <repo>
mvn clean install

# Does it work in a container?
docker run -it --rm -v "$PWD":/app -w /app maven:3.9-eclipse-temurin-17 mvn clean install

# Does it work with different Maven version?
mvn wrapper:wrapper -Dmaven=3.8.8
./mvnw clean install
```

**Step 2: Minimal Reproduction**

```bash
# Single module instead of multi-module
mvn clean install -pl problem-module

# Specific phase
mvn compile
mvn test-compile
mvn test

# Specific plugin
mvn compiler:compile
mvn surefire:test
```

**Step 3: Gather Evidence**

```bash
# Versions
mvn -v
java -version

# Effective POM
mvn help:effective-pom -Doutput=effective.xml

# Dependency tree
mvn dependency:tree -Dverbose > deps.txt

# Full debug output
mvn clean install -X > debug.log 2>&1
```

---

### 4.2 Common Fixes Checklist

```bash
# 1. Clean local repository
rm -rf ~/.m2/repository
mvn clean install

# 2. Update snapshots
mvn clean install -U

# 3. Verify Maven version
mvn -v

# 4. Check Java version
java -version

# 5. Validate POM
mvn validate

# 6. Check effective POM
mvn help:effective-pom

# 7. Analyze dependencies
mvn dependency:analyze

# 8. Check for updates
mvn versions:display-dependency-updates

# 9. Try offline mode
mvn clean install -o

# 10. Increase memory
export MAVEN_OPTS="-Xmx2g"
mvn clean install
```

---

## 5. Error Messages Reference

### Common Error Patterns

**"Could not resolve dependencies"**

```
Cause: Dependency not found in repositories
Fix: 
  1. Check spelling of groupId/artifactId/version
  2. Verify repository configuration
  3. Check network connectivity
  4. Try mvn clean install -U
```

**"Failed to execute goal"**

```
Cause: Plugin execution failed
Fix:
  1. Read error message for specific cause
  2. Run with mvn -X for debug output
  3. Check plugin configuration
  4. Verify plugin version
```

**"Non-resolvable parent POM"**

```
Cause: Parent POM not found
Fix:
  1. Check parent coordinates
  2. Verify relativePath
  3. Install parent: cd parent && mvn install
  4. Check repository configuration
```

**"Artifact has been tampered with"**

```
Cause: Checksum validation failed
Fix:
  1. Delete from local repo: rm -rf ~/.m2/repository/...
  2. Re-download: mvn clean install -U
  3. Check repository mirror
```

**"No compiler is provided"**

```
Cause: JDK not found (only JRE available)
Fix:
  1. Install JDK (not just JRE)
  2. Set JAVA_HOME to JDK path
  3. Verify: mvn -v should show JDK path
```

---

## Summary

### Quick Troubleshooting Guide

```
Problem: Build fails
├── Run: mvn clean install -X
├── Check: Error message
└── Fix: Based on error type

Problem: Dependency issues
├── Run: mvn dependency:tree -Dverbose
├── Check: Conflicts and missing deps
└── Fix: Exclude or explicitly declare

Problem: Plugin issues
├── Run: mvn help:describe -Dplugin=<name>
├── Check: Plugin exists and version correct
└── Fix: Update plugin or add repository

Problem: Performance
├── Run: mvn -T 4 -o
├── Check: MAVEN_OPTS memory settings
└── Fix: Increase memory, use parallel builds

Problem: Strange behavior
├── Run: rm -rf ~/.m2/repository
├── Clean: mvn clean
└── Rebuild: mvn clean install -U
```

### Essential Debug Commands

```bash
# Information gathering
mvn -v                              # Maven version
mvn help:effective-pom              # Final POM
mvn help:effective-settings         # Active settings
mvn help:active-profiles            # Active profiles
mvn dependency:tree -Dverbose       # Dependency conflicts

# Problem diagnosis
mvn dependency:analyze              # Unused/undeclared deps
mvn versions:display-dependency-updates  # Available updates
mvn enforcer:enforce                # Rule violations
mvn validate                        # POM validation

# Build optimization
mvn clean install -T 4              # Parallel build
mvn clean install -o                # Offline mode
mvn clean install -DskipTests       # Skip tests
export MAVEN_OPTS="-Xmx2g"         # Increase memory

# Recovery
rm -rf ~/.m2/repository             # Nuclear option
mvn clean install -U                # Force update
mvn dependency:purge-local-repository  # Clean SNAPSHOTs
```
